# ğŸ—„ï¸ Database Setup Guide

## ğŸ“‹ æ¦‚è¿°

é¡¹ç›®ä½¿ç”¨ Docker è¿è¡Œ PostgreSQL æ•°æ®åº“ï¼Œå¹¶é€šè¿‡ Prisma ORM è¿›è¡Œæ•°æ®åº“ç®¡ç†ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æ•°æ®åº“

```bash
# å¯åŠ¨ PostgreSQL æ•°æ®åº“
pnpm run db:start

# æˆ–è€…ç›´æ¥ä½¿ç”¨ Docker Compose
docker-compose up -d postgres
```

### 2. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# åˆ›å»ºæ•°æ®åº“è¡¨
pnpm run prisma:migrate
```

### 3. æ·»åŠ ç¤ºä¾‹æ•°æ®

```bash
# è¿è¡Œç§å­è„šæœ¬æ·»åŠ ç¤ºä¾‹æ•°æ®
pnpm run prisma:seed
```

## ğŸ“Š æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“ç±»å‹**: PostgreSQL 15
- **ç«¯å£**: 5433 (é¿å…ä¸ç³»ç»Ÿ PostgreSQL å†²çª)
- **æ•°æ®åº“å**: b2b_business
- **ç”¨æˆ·å**: postgres
- **å¯†ç **: postgres123
- **è¿æ¥URL**: `postgresql://postgres:postgres123@localhost:5433/b2b_business?schema=public`

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

```bash
# æ•°æ®åº“ç®¡ç†
pnpm run db:start          # å¯åŠ¨æ•°æ®åº“
pnpm run db:stop           # åœæ­¢æ•°æ®åº“
pnpm run db:reset          # é‡ç½®æ•°æ®åº“ (åˆ é™¤æ‰€æœ‰æ•°æ®)

# Prisma å‘½ä»¤
pnpm run prisma:generate   # ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm run prisma:migrate    # è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm run prisma:reset      # é‡ç½®æ•°æ®åº“æ¶æ„
pnpm run prisma:studio     # æ‰“å¼€ Prisma Studio (æ•°æ®åº“å¯è§†åŒ–å·¥å…·)
pnpm run prisma:seed       # è¿è¡Œç§å­æ•°æ®
```

## ğŸ“ æ•°æ®åº“æ¶æ„

### Users (ç”¨æˆ·è¡¨)
- ç®¡ç†å‘˜å’Œç¼–è¾‘ç”¨æˆ·
- è§’è‰²æƒé™ç®¡ç†
- ç™»å½•çŠ¶æ€è·Ÿè¸ª

### Products (äº§å“è¡¨)
- äº§å“ä¿¡æ¯ç®¡ç†
- åˆ†ç±»å’Œè§„æ ¼
- å‘å¸ƒçŠ¶æ€æ§åˆ¶

### BlogPosts (åšå®¢æ–‡ç« è¡¨)
- æ–‡ç« å†…å®¹ç®¡ç†
- SEO ä¼˜åŒ–å­—æ®µ
- ä½œè€…å…³è”

### Contacts (è”ç³»è¡¨å•è¡¨)
- ç”¨æˆ·è¯¢ç›˜ç®¡ç†
- çŠ¶æ€è·Ÿè¸ª

## ğŸ”§ ç¤ºä¾‹æ•°æ®

ç§å­è„šæœ¬ä¼šåˆ›å»ºä»¥ä¸‹ç¤ºä¾‹æ•°æ®ï¼š

### ç”¨æˆ·è´¦æˆ·
- **ç®¡ç†å‘˜**: admin@b2bbusiness.com (å¯†ç : password)
- **ç¼–è¾‘**: editor@b2bbusiness.com (å¯†ç : password)

### äº§å“ç¤ºä¾‹
- å·¥ä¸šLEDç…§æ˜ç³»ç»Ÿ
- CNCåŠ å·¥ä¸­å¿ƒ
- é’¢ç»“æ„ææ–™
- ç”µå­æ§åˆ¶ç³»ç»Ÿ

### åšå®¢æ–‡ç« 
- 2024å¹´å…¨çƒè´¸æ˜“è¶‹åŠ¿
- B2Bè´¸æ˜“ä¸­çš„å¯æŒç»­åˆ¶é€ 
- å›½é™…ç‰©æµæ•°å­—åŒ–è½¬å‹

## ğŸ” æ•°æ®åº“ç®¡ç†å·¥å…·

### Prisma Studio
```bash
pnpm run prisma:studio
```
åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:5555 æ¥å¯è§†åŒ–ç®¡ç†æ•°æ®åº“

### ç›´æ¥è¿æ¥æ•°æ®åº“
```bash
# ä½¿ç”¨ psql è¿æ¥
psql postgresql://postgres:postgres123@localhost:5433/b2b_business

# æˆ–è€…è¿›å…¥ Docker å®¹å™¨
docker-compose exec postgres psql -U postgres -d b2b_business
```

## ğŸ”„ å¼€å‘å·¥ä½œæµ

1. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**:
   ```bash
   pnpm run db:start    # å¯åŠ¨æ•°æ®åº“
   pnpm run dev         # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
   ```

2. **ä¿®æ”¹æ•°æ®åº“æ¶æ„**:
   - ç¼–è¾‘ `prisma/schema.prisma`
   - è¿è¡Œ `pnpm run prisma:migrate`

3. **é‡ç½®å¼€å‘æ•°æ®**:
   ```bash
   pnpm run prisma:reset  # é‡ç½®å¹¶è¿è¡Œç§å­æ•°æ®
   ```

## ğŸš¨ æ•…éšœæ’é™¤

### ç«¯å£å†²çª
å¦‚æœ 5433 ç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„ï¼š
```yaml
ports:
  - "5434:5432"  # ä½¿ç”¨ä¸åŒç«¯å£
```

### æ•°æ®åº“è¿æ¥é—®é¢˜
1. ç¡®ä¿ Docker æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€: `docker-compose ps`
3. æŸ¥çœ‹å®¹å™¨æ—¥å¿—: `docker-compose logs postgres`

### æƒé™é—®é¢˜
```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh
```

## ğŸ“ˆ ç”Ÿäº§ç¯å¢ƒ

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼š
1. ä¿®æ”¹æ•°æ®åº“å¯†ç 
2. ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
3. å¯ç”¨æ•°æ®åº“å¤‡ä»½
4. é…ç½®æ•°æ®åº“è¿æ¥æ± 

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

- ç”Ÿäº§ç¯å¢ƒä¸­å¿…é¡»æ›´æ”¹é»˜è®¤å¯†ç 
- ä½¿ç”¨å¼ºå¯†ç å’Œå®‰å…¨çš„è¿æ¥å­—ç¬¦ä¸²
- å®šæœŸå¤‡ä»½æ•°æ®åº“
- é™åˆ¶æ•°æ®åº“è®¿é—®æƒé™
